spring:
  application:
    name: mod-entities-links
  main:
    banner-mode: off
  liquibase:
    change-log: classpath:db/changelog/changelog-master.xml
  jpa:
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
#        generate_statistics: true
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true
    show-sql: true
  kafka:
    producer:
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
  sql:
    init:
      continue-on-error: true
  jackson:
    default-property-inclusion: non_null
    deserialization:
      fail-on-unknown-properties: false
      accept-single-value-as-array: true

folio:
  environment: folio-test
  system-user:
    enabled: true
    username: mod-entities-links
    password: mod-entities-links
    lastname: System
    permissionsFilePath: permissions/test-permissions.csv
  exchange:
    enabled: true
  kafka:
    topics:
      - name: links.instance-authority
        numPartitions: 1
        replicationFactor:
      - name: inventory.authority
        numPartitions: 1
        replicationFactor:
      - name: links.instance-authority-stats
        numPartitions: 1
        replicationFactor:
      - name: authorities.authority
        numPartitions: 1
        replicationFactor:
      - name: authority.authority-source-file
        numPartitions: 1
        replicationFactor:
      - name: specification-storage.specification.update
        numPartitions: 1
        replicationFactor:
      - name: DI_INVENTORY_AUTHORITY_UPDATED
        numPartitions: 1
        replicationFactor:
      - name: DI_INVENTORY_AUTHORITY_CREATED_READY_FOR_POST_PROCESSING
        numPartitions: 1
        replicationFactor:
      # following topics are used to produce DI events for DataImportEventListener and check published events in tests
      - name: DI_SRS_MARC_AUTHORITY_RECORD_CREATED
        numPartitions: 1
        replicationFactor:
      - name: DI_SRS_MARC_AUTHORITY_RECORD_MODIFIED_READY_FOR_POST_PROCESSING
        numPartitions: 1
        replicationFactor:
      - name: DI_SRS_MARC_AUTHORITY_RECORD_DELETED
        numPartitions: 1
        replicationFactor:
      - name: DI_ERROR
        numPartitions: 1
        replicationFactor:
      - name: DI_COMPLETED
        numPartitions: 1
        replicationFactor:
    listener:
      authority:
        concurrency: 1
        topic-pattern: (${folio.environment}\.)(.*\.)authorities\.authority
        group-id: ${folio.environment}-mod-entities-links-authorities-group
      instance-authority-stats:
        concurrency: 1
        topic-pattern: (${folio.environment}\.)(.*\.)links\.instance-authority-stats
        group-id: ${folio.environment}-mod-entities-links-stats-group
      specification-storage:
        concurrency: 1
        topic-pattern: (${folio.environment}\.)(.*\.)specification-storage\.specification\.updated
        group-id: ${folio.environment}-mod-entities-specification-storage-group
        auto-offset-reset: EARLIEST
      data-import:
        concurrency: 1
        topic-pattern: (${folio.environment}\.)[A-Za-z0-9-]+\.\w+\.DI_SRS_MARC_AUTHORITY_RECORD_(CREATED|MODIFIED_READY_FOR_POST_PROCESSING|DELETED|NOT_MATCHED)
        group-id: ${folio.environment}-mod-entities-links-data-import-group
        auto-offset-reset: EARLIEST
  jpa:
    repository:
      base-packages: org.folio.entlinks.domain
  tenant:
    settings:
      domain: authorities
      permission-check-enabled: false
    validation:
      enabled: true
  logging:
    request:
      enabled: true
    exchange:
      enabled: true

server.port: 8081
